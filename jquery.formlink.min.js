!function($){function QueryString(qs){this.dict={};if(!qs)qs=location.search;if(qs.charAt(0)=="?")qs=qs.substring(1);var re=/([^=&]+)(=([^&]*))?/g;while(match=re.exec(qs)){var key=decodeURIComponent(match[1].replace(/\+/g," "));var value=match[3]?QueryString.decode(match[3]):"";if(this.dict[key])this.dict[key].push(value);else this.dict[key]=[value]}}QueryString.decode=function(s){s=s.replace(/\+/g," ");s=s.replace(/%([EF][0-9A-F])%([89AB][0-9A-F])%([89AB][0-9A-F])/g,function(code,hex1,hex2,hex3){var n1=parseInt(hex1,16)-224;var n2=parseInt(hex2,16)-128;if(n1==0&&n2<32)return code;var n3=parseInt(hex3,16)-128;var n=(n1<<12)+(n2<<6)+n3;if(n>65535)return code;return String.fromCharCode(n)});s=s.replace(/%([CD][0-9A-F])%([89AB][0-9A-F])/g,function(code,hex1,hex2){var n1=parseInt(hex1,16)-192;if(n1<2)return code;var n2=parseInt(hex2,16)-128;return String.fromCharCode((n1<<6)+n2)});s=s.replace(/%([0-7][0-9A-F])/g,function(code,hex){return String.fromCharCode(parseInt(hex,16))});return s};QueryString.prototype.value=function(key){var a=this.dict[key];return a?a[a.length-1]:undefined};QueryString.prototype.values=function(key){var a=this.dict[key];return a?a:[]};QueryString.prototype.keys=function(){var a=[];for(var key in this.dict)a.push(key);return a};String.prototype.format=function(){var args=arguments;return this.replace(/{(\d+)}/g,function(match,number){return typeof args[number]!="undefined"?args[number]:match})};String.prototype.hashCode=function(){var hash=0,i,$char;if(this.length==0)return hash;for(i=0,l=this.length;i<l;i++){$char=this.charCodeAt(i);hash=(hash<<5)-hash+$char;hash|=0}return hash};$.fn.serializeObject=function(){var o={};var a=this.serializeArray();$.each(a,function(){if(o[this.name]!==undefined){if(!o[this.name].push){o[this.name]=[o[this.name]]}o[this.name].push(this.value||"")}else{o[this.name]=this.value||""}});return o};var formLinkParam="jquery.formlink";var excludeTypes=["password"];$.fn.formlink=function(options){options=options||{};function prepareFormData(form){var data=form.serializeObject();$.each(excludeTypes,function(idx,excludeType){var inputs=form.find('input[type="{0}"][name]'.format(excludeType));inputs.each(function(idx,input){delete data[$(input).attr("name")]})});return data}function getFormId(form){}function unlinkifyFormData(){var queryStr=window.location.search&&window.location.search.trim();if(queryStr){var queryParams=new QueryString(queryStr);var formLinkValue=queryParams.value(formLinkParam);if(formLinkValue){return JSON.parse(formLinkValue)}}return null}function linkifyFormData(form){var formId=form.attr("id");if(!formId){throw new Error('form element must have an "id"')}var encodedFormData=encodeURIComponent(JSON.stringify(prepareFormData(form)));var protocol=window.location.protocol;var host=window.location.host;var pathname=window.location.pathname;var search=window.location.search?window.location.search:"?";var hash=window.location.hash;var qs=new QueryString(search);if(qs.value(formLinkParam)){search="?";var keys=qs.keys();$(keys).each(function(idx,key){if(key==formLinkParam){search+=formLinkParam+"="+encodedFormData}else{search+=key+"="+qs.value(key)}})}else{if(search.length==1||search.charAt(search.length-1)=="&"){search+=formLinkParam+"="+encodedFormData}else{search+="&"+formLinkParam+"="+encodedFormData}}return protocol+"//"+host+pathname+search+hash}return this.each(function(){var $this=$(this);var formData=unlinkifyFormData();if(formData){$.formlink.applyForm($this,formData)}function getFormLink(){return linkifyFormData($this)}if(options.handle){var formlink={get:getFormLink};options.handle(formlink)}else{var $a=$('<a href="#">FormLink</a>').appendTo($this);function refreshFormLink(){$a.attr("href",getFormLink())}$this.change(function(jqEvent){refreshFormLink()});$a.on("mouseover click",function(jqEvent){refreshFormLink()})}})};$.formlink={applyForm:function($form,values){$form[0].reset();$.each(values,function(key,value){var values=[].concat(value);var inputs=$form.find('[name="{0}"]'.format(key));if(inputs.is("[type=checkbox]")){var secondaryFill=[];for(var i=0;i<values.length;i++){var valueAttr=values[i];if(!inputs.filter('[value="{0}"]:not(:checked):first'.format(valueAttr)).prop("checked",true).size()){secondaryFill.push(valueAttr)}}var nonValue=$("[type=checkbox]:not([value])");for(var j=0;j<secondaryFill.length&&j<nonValue.size();j++){$(nonValue[j]).prop("checked",true)}}else if(inputs.is("[type=radio]")){inputs.filter('[value="{0}"]'.format(value)).prop("checked",true)}else if(inputs.is("select[multiple]")){inputs.val(values)}else{inputs.val(function(idx,oldVal){return values.length>idx?values[idx]:null})}})}}}(jQuery);